if(TARGET stdgpu::stdgpu)
  return()
endif()

set(stdgpu_SOURCE_DIR ${CMAKE_CURRENT_LIST_DIR}/stdgpu)

set(STDGPU_BUILD_EXAMPLES OFF CACHE INTERNAL "")
set(STDGPU_BUILD_TESTS OFF CACHE INTERNAL "")
set(STDGPU_BUILD_BENCHMARKS OFF CACHE INTERNAL "")
set(STDGPU_SETUP_COMPILER_FLAGS OFF CACHE INTERNAL "")
add_subdirectory(${stdgpu_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}/stdgpu)
set_target_properties(stdgpu PROPERTIES POSITION_INDEPENDENT_CODE ON)
target_include_directories(stdgpu INTERFACE $<BUILD_INTERFACE:${stdgpu_SOURCE_DIR}/src>)
#install(TARGETS stdgpu)
install(DIRECTORY ${stdgpu_SOURCE_DIR}/src/stdgpu
  DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
  FILES_MATCHING PATTERN "*.cpp" EXCLUDE PATTERN "*.txt" EXCLUDE)
